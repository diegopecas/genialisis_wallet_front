<div class="app-container" *ngIf="isAuthenticated()">
  <!-- HEADER -->
  <header class="app-header">
    <div class="header-content">
      <div class="header-text">
        <h1 class="app-title">Circle Finance</h1>
        <p class="app-subtitle">
          {{ currentCirculo?.icono }} {{ currentCirculo?.nombre }}
        </p>
      </div>

      <!-- SELECTORES DE PERIODO -->
      <div
        class="periodo-selector"
        *ngIf="
          activeTab === 'gastos' ||
          activeTab === 'ingresos' ||
          activeTab === 'balance' ||
          activeTab === 'traslados'
        "
      >
        <select
          class="selector-periodo"
          [(ngModel)]="anioSeleccionado"
          (change)="onAnioChange()"
        >
          <option *ngFor="let anio of aniosDisponibles" [value]="anio">
            {{ anio }}
          </option>
        </select>

        <select
          class="selector-periodo"
          [(ngModel)]="mesSeleccionado"
          (change)="onMesChange()"
        >
          <option *ngFor="let mes of mesesDisponibles" [value]="mes">
            {{ getNombreMes(mes) }}
          </option>
        </select>
      </div>

      <button class="logout-btn" (click)="logout()" title="Cerrar sesiÃ³n">
        ðŸšª
      </button>
    </div>
  </header>

  <!-- TABS -->
  <div class="tabs-container">
    <button
      class="tab-btn"
      [class.active]="activeTab === 'gastos'"
      (click)="changeTab('gastos')"
    >
      <span class="tab-icon">ðŸ’¸</span>
      <span>Gastos</span>
    </button>
    <button
      class="tab-btn"
      [class.active]="activeTab === 'ingresos'"
      (click)="changeTab('ingresos')"
    >
      <span class="tab-icon">ðŸ’°</span>
      <span>Ingresos</span>
    </button>
    <button
      class="tab-btn"
      [class.active]="activeTab === 'traslados'"
      (click)="changeTab('traslados')"
    >
      <span class="tab-icon">â†»</span>
      <span>Traslados</span>
    </button>
    <button
      class="tab-btn"
      [class.active]="activeTab === 'balance'"
      (click)="changeTab('balance')"
    >
      <span class="tab-icon">ðŸ“Š</span>
      <span>Balance</span>
    </button>
  </div>

  <!-- CONTENIDO -->
  <router-outlet></router-outlet>
</div>

<!-- LOGIN -->
<router-outlet *ngIf="!isAuthenticated()"></router-outlet>

<!-- LOADING SPINNER GLOBAL -->
<app-loading-spinner></app-loading-spinner>