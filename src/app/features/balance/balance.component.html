<div class="tab-content">
  <!-- FILTROS -->
  <div class="filters-card">
    <h2 class="filters-title">ðŸ“Š Filtros</h2>
    
    <form [formGroup]="filtrosForm" class="filters-form">
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">AÃ±o</label>
          <select formControlName="anio" class="form-select">
            <option *ngFor="let anio of anios" [value]="anio">{{ anio }}</option>
          </select>
        </div>
        
        <div class="form-group">
          <label class="form-label">Mes</label>
          <select formControlName="mes" class="form-select">
            <option [value]="null">Todos</option>
            <option *ngFor="let mes of meses" [value]="mes.value">{{ mes.nombre }}</option>
          </select>
        </div>
      </div>
    </form>
  </div>

  <!-- CARDS DE BALANCE -->
  <div class="balance-cards">
    <div class="balance-card income">
      <div class="balance-label">ðŸ’° Total Ingresos</div>
      <div class="balance-value">{{ formatearValor(balance.total_ingresos) }}</div>
    </div>
    
    <div class="balance-card expense">
      <div class="balance-label">ðŸ’¸ Total Gastos</div>
      <div class="balance-value">{{ formatearValor(balance.total_gastos) }}</div>
    </div>
    
    <div class="balance-card net" [class.negative]="balance.balance_neto < 0">
      <div class="balance-label">ðŸŽ¯ Balance Neto</div>
      <div class="balance-value">{{ formatearValor(balance.balance_neto) }}</div>
    </div>
  </div>

  <!-- GRÃFICO -->
  <div class="chart-card" *ngIf="mostrarGrafico && !loading">
    <h3 class="chart-title">ðŸ“ˆ EvoluciÃ³n Mensual</h3>
    <div class="chart-container">
      <canvas #chartCanvas></canvas>
    </div>
  </div>

  <!-- DETALLE POR CONCEPTO -->
  <div class="detail-section" *ngIf="!loading">
    <!-- INGRESOS -->
    <div class="detail-card" *ngIf="detalleIngresos.length > 0">
      <h3 class="detail-title income">ðŸ’° Detalle Ingresos</h3>
      <div class="detail-list">
        <div class="detail-item" *ngFor="let detalle of detalleIngresos">
          <div class="detail-info">
            <span class="detail-icon">{{ detalle.concepto_icono }}</span>
            <div class="detail-text">
              <div class="detail-name">{{ detalle.concepto_nombre }}</div>
              <div class="detail-count">{{ detalle.cantidad }} movimiento(s)</div>
            </div>
          </div>
          <div class="detail-value income">{{ formatearValor(detalle.total) }}</div>
        </div>
      </div>
    </div>

    <!-- GASTOS -->
    <div class="detail-card" *ngIf="detalleGastos.length > 0">
      <h3 class="detail-title expense">ðŸ’¸ Detalle Gastos</h3>
      <div class="detail-list">
        <div class="detail-item" *ngFor="let detalle of detalleGastos">
          <div class="detail-info">
            <span class="detail-icon">{{ detalle.concepto_icono }}</span>
            <div class="detail-text">
              <div class="detail-name">{{ detalle.concepto_nombre }}</div>
              <div class="detail-count">{{ detalle.cantidad }} movimiento(s)</div>
            </div>
          </div>
          <div class="detail-value expense">{{ formatearValor(detalle.total) }}</div>
        </div>
      </div>
    </div>
  </div>

  <!-- LOADING -->
  <div *ngIf="loading" class="loading-message">Cargando datos...</div>
</div>
